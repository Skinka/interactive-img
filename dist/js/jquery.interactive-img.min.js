!function(i){i.fn.interactiveImg=function(t){var n=i.extend({imageWidth:0,imageHeight:0,mode:"hover click",duration:300},t);return this.each(function(){var t=i(this);i(window).resize(function(){var t=i(this);console.log(t);var d=e(t,n);a(t.find("img"),d)}.bind(t));var d=new Image;d.className="interactive__img",d.onload=function(){var t=i(this),d=e(t,n);a(t.find("img"),d)}.bind(t),d.src=t.data("ii-src"),t.append(i(d)),t.append('<div class="interactive-darken" style="display: none;"></div>')});function e(i,t){var n=t;return n.imageWidth=i.data("ii-width")?i.data("ii-width"):n.imageWidth,n.imageHeight=i.data("ii-height")?i.data("ii-height"):n.imageHeight,n.mode=i.data("ii-mode")?i.data("ii-mode"):n.mode,n.duration=i.data("ii-duration")?i.data("ii-duration"):n.duration,n}function a(t,n){i(t).parent().find(".interactive-point").each(function(){!function(t,n){var e,a,r=i(t);r.off();var o=r.parents(".interactive").find("img.interactive__img");e=parseInt(r.data("ii-top"))*parseInt(o.height())/parseInt(n.imageHeight)-r.innerHeight()/2,a=parseInt(r.data("ii-left"))*parseInt(o.width())/parseInt(n.imageWidth)-r.innerWidth()/2,function(i){var t=i.find(".interactive-point__description");switch(i.data("ii-position")?i.data("ii-position"):"bottom"){case"top":t.addClass("interactive-point__description--top"),t.css("margin","-"+(t.innerHeight()+1.5*i.height())+"px 0 0 -"+(t.innerWidth()/2-i.width()/2)+"px");break;case"bottom":t.addClass("interactive-point__description--bottom"),t.css("margin",i.height()/2+"px 0 0 -"+(t.innerWidth()/2-i.width()/2)+"px");break;case"right":t.addClass("interactive-point__description--right"),t.css("margin","-"+(t.innerHeight()/2+i.height()/2)+"px 0 0 "+1.5*i.width()+"px");break;case"left":t.addClass("interactive-point__description--left"),t.css("margin","-"+(t.innerHeight()/2+i.height()/2)+"px 0 0 -"+(t.innerWidth()+i.width()/2)+"px")}}(r),i(window).resize(function(){d(r)}),!1!==n.mode.indexOf("click")&&r.on("click",function(t){r.parents(".interactive").append(r),r.find(".interactive-point__description").stop().toggle(n.duration,function(){i(window).width()<=992&&d(r)}),r.parent().find(".interactive-darken").stop().toggle(n.duration)});!1!==n.mode.indexOf("hover")&&i(window).width()>992&&r.hover(function(){r.parents(".interactive").append(r),r.parent().find(".interactive-darken").stop().show(n.duration),r.find(".interactive-point__description").stop().show(n.duration)},function(){r.parent().find(".interactive-darken").stop().hide(n.duration),r.find(".interactive-point__description").stop().hide(n.duration)});r.css({top:e,left:a})}(this,n)})}function d(t){var n=t.find(".interactive-point__description");n.offset().top<0&&n.css("margin-top",parseInt(n.css("margin-top"))+Math.abs(n.offset().top)+"px"),n.offset().left<0&&n.css("margin-left",parseInt(n.css("margin-left"))+Math.abs(n.offset().left)+"px"),i(window).width()-(n.offset().left+n.width())<0&&n.css("margin-left",parseInt(n.css("margin-left"))-Math.abs(i(window).width()-(n.offset().left+n.width()))-parseInt(n.css("padding-right"))-parseInt(n.css("padding-left"))+"px")}}}(jQuery);